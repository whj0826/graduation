{"version":3,"file":"static/js/17.4d32bb81.chunk.js","mappings":"mQAoBMA,EAAU,CAAC,CACbC,GAAI,SACJC,KAAM,eACNC,KAAM,GACNC,KAAM,eACNC,OAAQ,CAAC,mDAAmD,oDAC5DC,KAAM,mDACNC,SAAU,CAzBA,CACVN,GAAI,SACJC,KAAM,eACNC,KAAM,GACNC,KAAM,IAAII,KACVH,OAAQ,GACRC,KAAM,mDACNC,SAAU,IAEA,CACVN,GAAI,SACJC,KAAM,eACNC,KAAM,GACNC,KAAM,eACNC,OAAQ,GACRC,KAAM,6CACNC,SAAU,MAWV,CACIN,GAAI,SACJC,KAAM,eACNC,KAAM,GACNC,KAAM,eACNC,OAAQ,GACRC,KAAM,mDACNC,SAAU,KAIlB,SAASE,EAASC,GACd,IAAMP,EAAOO,EAAMP,KACbD,EAAOQ,EAAMR,KACnB,OACI,SAAC,EAAAS,SAAD,WACI,UAACC,EAAA,EAAD,CAAOC,UAAU,MAAMC,GAAI,CAACC,OAAO,GAAnC,UAEY,IAANZ,GAAW,SAACa,EAAA,EAAD,iBAAqB,SAACA,EAAA,EAAD,CAAQC,IAAKd,KAE/C,gBAAKe,MAAO,CAACH,OAAO,IAApB,SAA0Bb,QAIzC,CAED,SAASiB,EAAST,GACd,IAAMJ,EAAOI,EAAMJ,KACbD,EAASK,EAAML,OACrB,OACI,SAAC,EAAAM,SAAD,WACI,iBAAKO,MAAO,CAACH,OAAO,GAApB,WAEA,0BAAOT,IAEW,GAAjBD,EAAOe,SACJ,SAAC,EAAAT,SAAD,WACI,SAACC,EAAA,EAAD,CAAOC,UAAU,MAAjB,SACKR,EAAOgB,KAAI,SAACC,EAAKC,GAAN,OACR,gBAAiBL,MAAO,CAACH,OAAO,GAAhC,UACI,gBAAKS,IAAKF,EAAML,IAAKK,EAAMJ,MACtB,CAAEO,MAAM,GAAGC,OAAO,OAFjBH,EADF,YAYnC,CACc,SAASI,IACpB,OACI,SAAC,EAAAhB,SAAD,WACI,SAACC,EAAA,EAAD,UACKZ,EAAQqB,KAAI,SAACC,GAAD,OACL,4BAEI,gBAAKM,UAAU,YAAf,UACG,SAACnB,EAAD,CAAUP,KAAMoB,EAAKpB,KAAMC,KAAMmB,EAAKnB,UAGzC,gBAAKyB,UAAU,YAAf,UACI,SAACT,EAAD,CAAUb,KAAMgB,EAAKhB,KAAMD,OAAQiB,EAAKjB,YAG5C,gBAAKuB,UAAU,YAAf,UACI,0BAAON,EAAKlB,WAXVkB,EAAKrB,GADV,OAoB5B,CClFc,SAAS4B,IACpB,IAAMvB,GAAOwB,EAAAA,EAAAA,QAAO,MAQpB,GAAgCC,EAAAA,EAAAA,UAAS,IAAzC,eAAOC,EAAP,KAAiBC,EAAjB,KAEIC,EAAW,GAgCf,SAASC,EAAIC,GACT,IAAMC,EAAUD,EAAEE,OAAOC,MACzBC,IAAAA,IAAU,sCAAwCH,GAC7CI,MAAK,SAAAC,GAEF,GAAc,MAAVA,EAAIC,KAAW,CAEf,IAAK,IAAIC,EAAI,EAAIA,EAAEZ,EAASZ,OAASwB,IACjC,GAAIZ,EAASY,GAAGtC,MAAQ+B,EAAQ,CAC5BL,EAASa,OAAOD,EAAE,GAClB,KACH,CAELX,GAAY,OAAID,IAChBc,QAAQC,IAAI,2BACf,MACGD,QAAQC,IAAI,2BAEnB,IAAEC,OAAM,SAAAC,GACLH,QAAQI,MAAMD,EACjB,GACR,CAED,OACI,SAAC,EAAAtC,SAAD,WACI,SAACwC,EAAA,EAAD,CAAWC,SAAS,KAApB,UACI,0BACI,UAACxC,EAAA,EAAD,CAAOyC,QAAS,EAAhB,WAEI,gBAAKzB,UAAU,MAAf,UACI,UAAChB,EAAA,EAAD,CAAOC,UAAU,SAAjB,WACI,SAACyC,EAAA,EAAD,CACIC,MAAM,eACNC,WAAW,EACXC,WAAW,EACXC,SAAUpD,KAGd,gBAAKsB,UAAU,SAAf,UACI,UAAChB,EAAA,EAAD,CAAOC,UAAU,MAAjB,UACKmB,EAASX,KAAI,SAACC,EAAMC,GAAP,OACV,iBAAiBK,UAAU,WAA3B,WACI,gBAAKJ,IAAKF,EAAKhB,KAAMW,IAAKK,EAAKqC,IAAK/B,UAAU,SAC9C,SAACgC,EAAA,EAAD,CAAQC,QAAQ,WAAWtB,MAAOjB,EAAKhB,KAC/BsB,UAAU,UAAUkC,UAAU,MAAMC,QAAS5B,EADrD,4BAFMZ,EADA,KAQd,UAACqC,EAAA,EAAD,CAAQC,QAAQ,WAAWG,WAAW,SAACC,EAAA,EAAD,IAAYH,UAAU,QAA5D,0BACI,kBAAO7D,GAAG,SAASiE,QAAM,EAACC,KAAK,OAAOjE,KAAK,OAAOkE,SArE1F,WACI,IAAMC,EAAWC,SAASC,eAAe,UAAUC,MAAM,GACzD1B,QAAQC,IAAIsB,GACZ,IAAMI,EAAW,IAAIC,SACrBD,EAASE,OAAO,OAAQN,GACxB7B,IAAAA,KAAW,+BAAgCiC,EAAU,CACjDG,QAAS,CACL,eAAgB,yBAErBnC,MAAK,SAAAC,GACU,SAAVA,EAAIC,OACJX,EAAS6C,KAAK,CAAClB,IA1Cd,yBA0C8BjB,EAAIC,KAAMrC,KAAMoC,EAAIC,OACnDV,GAAY,OAAID,IAEvB,IAAEgB,OAAM,SAAAC,GACLH,QAAQI,MAAMD,EACjB,GACJ,aAyD2B,SAACW,EAAA,EAAD,CAAQC,QAAQ,WAAWE,QAnFvD,WACIjB,QAAQC,IAAIzC,EAAKwE,QAAQC,OACzB,IAAK,IAAInC,EAAI,EAAGA,EAAIZ,EAASZ,OAAQwB,IACjCV,EAASU,GAAKZ,EAASY,GAAGe,IAE9Bb,QAAQC,IAAIb,EACf,EA6E2B,gCAIR,gBAAKN,UAAU,MAAf,UACI,SAACuB,EAAA,EAAD,CAAWC,SAAS,KAApB,UACI,SAACzB,EAAD,gBAQ/B,C","sources":["module/comment/commentContent.js","module/comment/comment.js"],"sourcesContent":["import {Avatar, Stack} from \"@mui/material\";\r\nimport React, {Fragment} from \"react\";\r\nconst data2 = {\r\n    id: '123456',\r\n    name: '小红',\r\n    icon: '',\r\n    date: new Date(),\r\n    images: [],\r\n    text: '123456花园路世界历史',\r\n    children: []\r\n}\r\nconst data3 = {\r\n    id: '001122',\r\n    name: '小萨',\r\n    icon: '',\r\n    date: '时间',\r\n    images: [],\r\n    text: '雷克萨饭店经理',\r\n    children: []\r\n}\r\nconst content = [{\r\n    id: 'abc123',\r\n    name: '小明',\r\n    icon: '',\r\n    date: '时间',\r\n    images: ['http://localhost:9090/1663833088230-12819617.jpg','http://localhost:9090/1663833119785-87430105.jpg'],\r\n    text: '哈哈哈哈啦啦啦啦',\r\n    children: [data2, data3]\r\n},\r\n    {\r\n        id: '123456',\r\n        name: '小红',\r\n        icon: '',\r\n        date: '时间',\r\n        images: [],\r\n        text: '123456花园路世界历史',\r\n        children: []\r\n    }\r\n]\r\n// 头像 + 用户名\r\nfunction Content1(props) {\r\n    const icon = props.icon;\r\n    const name = props.name;\r\n    return(\r\n        <Fragment>\r\n            <Stack direction=\"row\" sx={{margin:1}}>\r\n                {/*头像 <Avatat/> 默认大小为40px*/}\r\n                { icon=='' ? <Avatar>o</Avatar> : <Avatar src={icon}/> }\r\n                {/*用户名*/}\r\n                <div style={{margin:10}}>{name}</div>\r\n            </Stack>\r\n        </Fragment>\r\n    )\r\n}\r\n// 评论内容 + 评论图片\r\nfunction Content2(props) {\r\n    const text = props.text;\r\n    const images = props.images;\r\n    return(\r\n        <Fragment>\r\n            <div style={{margin:5}}>\r\n            {/*评论内容*/}\r\n            <span>{text}</span>\r\n            {/*图片*/}\r\n            {images.length != 0 &&\r\n                <Fragment>\r\n                    <Stack direction=\"row\">\r\n                        {images.map((item,index)=>(\r\n                            <div key={index} style={{margin:5}}>\r\n                                <img alt={item} src={item} style=\r\n                                    {{ width:80,height:80 }}/>\r\n                            </div>\r\n                        ))}\r\n                    </Stack>\r\n                </Fragment>\r\n            }\r\n            </div>\r\n        </Fragment>\r\n    )\r\n}\r\nexport default function CommentContent() {\r\n    return (\r\n        <Fragment>\r\n            <Stack>\r\n                {content.map((item) => (\r\n                        <div key={item.id}>\r\n                            {/*头像+用户名*/}\r\n                            <div className=\"content-1\">\r\n                               <Content1 name={item.name} icon={item.icon}/>\r\n                            </div>\r\n                            {/*评论内容：文字+图片*/}\r\n                            <div className=\"content-2\">\r\n                                <Content2 text={item.text} images={item.images}/>\r\n                            </div>\r\n                            {/*底部信息*/}\r\n                            <div className=\"content-3\">\r\n                                <span>{item.date}</span>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                )}\r\n            </Stack>\r\n        </Fragment>\r\n    )\r\n}","import React, {Fragment, useRef, useEffect, useState} from \"react\";\r\nimport {\r\n    Button,\r\n    Container,\r\n    Stack,\r\n    TextField\r\n} from \"@mui/material\";\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport axios from 'axios';\r\n\r\nimport './comment.css';\r\nimport CommentContent from \"./commentContent\";\r\n\r\n\r\nconst imageUrl = 'http://localhost:9090/';  // 访问图片的根路径\r\n\r\n/*\r\n* bug\r\n* 1.无法上传同一个文件\r\n* 2.上传超过5个文件时，上传组件会溢出\r\n* */\r\n\r\nexport default function Comment() {\r\n    const text = useRef(null); // 评论文字内容\r\n    /*\r\n    格式json\r\n        [ {\r\n            url: imageUrl + '1663749340491-376129531.jpg',\r\n            text: '1663749340491-376129531.jpg'\r\n        } ]\r\n    * */\r\n    const [showFile, setShowFile] = useState([]); // 文件链接数组\r\n\r\n    let fileList = []; // 对已经上传的文件放在数组中\r\n\r\n    // 发布\r\n    function release() {\r\n        console.log(text.current.value) // 评论文字内容\r\n        for (let i = 0; i < showFile.length; i++) {\r\n            fileList[i] = showFile[i].url;  // 获取showFile的ulr存放到新的数组中\r\n        }\r\n        console.log(fileList);\r\n    }\r\n\r\n    // 上传文件\r\n    function upload() {\r\n        const fileNode = document.getElementById('upload').files[0]; // 获取进行上传文件的节点的节点信息\r\n        console.log(fileNode);\r\n        const formData = new FormData();\r\n        formData.append(\"file\", fileNode);\r\n        axios.post('http://localhost:3000/upload', formData, {\r\n            headers: {\r\n                'content-type': 'multipart/form-data'\r\n            }\r\n        }).then(res => {\r\n            if (res.data!='error'){\r\n                showFile.push({url: imageUrl + res.data, text: res.data}) //res.data是后台返回过来的文件名\r\n                setShowFile([...showFile]); // 更新showFile的state\r\n            }\r\n        }).catch(err => {\r\n            console.error(err)\r\n        })\r\n    }\r\n\r\n    // 删除文件\r\n    function del(e) {\r\n        const delFile = e.target.title;\r\n        axios.get('http://localhost:3000/del?filename=' + delFile)\r\n            .then(res => {\r\n                // 如果后台成功删除了指定文件名的文件，则返回ok，否则返回error\r\n                if (res.data=='ok'){\r\n                    // 找到数组中指定文件名的下标，然后删除\r\n                    for (let i = 0 ; i<showFile.length ; i++){\r\n                        if (showFile[i].text == delFile){\r\n                            showFile.splice(i,1);  // arrayName.splice(index,deleteCount)\r\n                            break;\r\n                        }\r\n                    }\r\n                    setShowFile([...showFile]);  // 更新state\r\n                    console.log('删除成功');\r\n                }else{\r\n                    console.log('删除失败');\r\n                }\r\n            }).catch(err => {\r\n                console.error(err);\r\n            })\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <Container maxWidth=\"sm\">\r\n                <div>\r\n                    <Stack spacing={2}>\r\n                        {/* 输入评论内容 */}\r\n                        <div className=\"one\">\r\n                            <Stack direction=\"column\">\r\n                                <TextField\r\n                                    label=\"评论\"\r\n                                    fullWidth={true}\r\n                                    multiline={true}\r\n                                    inputRef={text}\r\n                                />\r\n                                {/* 上传图片 */}\r\n                                <div className=\"upload\">\r\n                                    <Stack direction=\"row\">\r\n                                        {showFile.map((item, index) =>\r\n                                            <div key={index} className=\"img-list\">\r\n                                                <img alt={item.text} src={item.url} className=\"img\"/>\r\n                                                <Button variant=\"outlined\" title={item.text}\r\n                                                        className=\"but-del\" component=\"div\" onClick={del}\r\n                                                >删除</Button>\r\n                                            </div>\r\n                                        )}\r\n                                        <Button variant=\"outlined\" startIcon={<AddIcon/>} component=\"label\">上传\r\n                                            <input id=\"upload\" hidden type=\"file\" name=\"file\" onChange={upload}/>\r\n                                        </Button>\r\n                                    </Stack>\r\n                                </div>\r\n                                {/* 提交按键 */}\r\n                                <Button variant=\"outlined\" onClick={release}>发布</Button>\r\n                            </Stack>\r\n                        </div>\r\n                        {/*输出（展示）评论内容*/}\r\n                        <div className=\"two\">\r\n                            <Container maxWidth=\"sm\">\r\n                                <CommentContent/>\r\n                            </Container>\r\n                        </div>\r\n                    </Stack>\r\n                </div>\r\n            </Container>\r\n        </Fragment>\r\n    );\r\n}"],"names":["content","id","name","icon","date","images","text","children","Date","Content1","props","Fragment","Stack","direction","sx","margin","Avatar","src","style","Content2","length","map","item","index","alt","width","height","CommentContent","className","Comment","useRef","useState","showFile","setShowFile","fileList","del","e","delFile","target","title","axios","then","res","data","i","splice","console","log","catch","err","error","Container","maxWidth","spacing","TextField","label","fullWidth","multiline","inputRef","url","Button","variant","component","onClick","startIcon","Add","hidden","type","onChange","fileNode","document","getElementById","files","formData","FormData","append","headers","push","current","value"],"sourceRoot":""}